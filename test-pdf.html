<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test PDF</title>
    <script src="https://unpkg.com/jspdf@latest/dist/jspdf.umd.min.js"></script>
</head>
<body>
    <h1>Test Generazione PDF</h1>
    <button onclick="testPDF()">üß™ Test PDF</button>
    <button onclick="checkLibrary()">üîç Controlla Libreria</button>
    
    <div id="status" style="margin-top: 20px; padding: 10px; background: #f0f0f0; border-radius: 5px;">
        Clicca "Controlla Libreria" per verificare il caricamento di jsPDF
    </div>

    <script>
        function checkLibrary() {
            const status = document.getElementById('status');
            let info = '<h3>Stato libreria jsPDF:</h3>';
            
            info += `<p><strong>window.jsPDF:</strong> ${typeof window.jsPDF}</p>`;
            
            if (window.jsPDF) {
                info += `<p><strong>Propriet√†:</strong> ${Object.keys(window.jsPDF).join(', ')}</p>`;
                
                if (window.jsPDF.jsPDF) {
                    info += `<p><strong>jsPDF constructor:</strong> ${typeof window.jsPDF.jsPDF}</p>`;
                    info += `<p style="color: green;">‚úÖ Libreria caricata correttamente!</p>`;
                } else {
                    info += `<p style="color: orange;">‚ö†Ô∏è Struttura diversa del previsto</p>`;
                }
            } else {
                info += `<p style="color: red;">‚ùå Libreria non trovata</p>`;
            }
            
            status.innerHTML = info;
        }
        
        function testPDF() {
            try {
                console.log('Testing PDF generation...');
                console.log('window.jsPDF:', window.jsPDF);
                
                let doc;
                if (window.jsPDF && window.jsPDF.jsPDF) {
                    doc = new window.jsPDF.jsPDF();
                } else if (window.jsPDF) {
                    doc = new window.jsPDF();
                } else {
                    throw new Error('jsPDF non disponibile');
                }
                doc.setFontSize(20);
                doc.text('Test PDF - 3D Makes', 20, 20);
                doc.setFontSize(12);
                doc.text('Questo √® un test di generazione PDF', 20, 40);
                doc.text(`Data: ${new Date().toLocaleDateString('it-IT')}`, 20, 60);
                
                doc.save('test-3dmakes.pdf');
                
                document.getElementById('status').innerHTML = '<p style="color: green;">‚úÖ PDF generato con successo!</p>';
            } catch (error) {
                document.getElementById('status').innerHTML = `<p style="color: red;">‚ùå Errore: ${error.message}</p>`;
                console.error('Errore PDF:', error);
            }
        }
        
        // Auto-check dopo caricamento
        window.addEventListener('load', function() {
            setTimeout(checkLibrary, 500);
        });
    </script>
</body>
</html>
